### CAP三原则

- Consistency
- Availability
- Partition tolerance

CAP定理: 这三个指标最多同时做到两个

### consistency(一致性)

对于分布式系统而言,往往存在多个服务器节点.
数据一致性,就是用户在某个服务器节点上更新了数据,这个服务器要通知其他服务器更新数据,在此期间必须锁定该数据的读写
这样保证用户读到的数据是最新的(严格一致)

### Availability(可用性)

对于一个用户请求,服务器必须做出非错误回应,不需要保证数据最新的(即一致性)

### Partition tolerance (分区容错性)

如果服务器节点间出现了网络故障,不能通信了,各个服务器节点也能正常运行


### 抉择
由于网络故障是常见的而且无法避免,对于不满足分区容错性的系统,一旦节点间网络发生故障,整个系统就会瘫痪,这往往是不能忍受的所以分布式系统一般都要满足P.

在这种情况下,这样一旦节点间发生网络错误,各节点独立运行,就会有以下两种选择:

1. Consistency优先(牺牲可用性A)

    由于节点间不能通信,为了强制保证一致性,服务器往往会拒绝掉所有读写操作,直到网络恢复正常,各节点间更新完数据,服务器才能继续工作

2. Availability优先(牺牲一致性C)

    各节点正常接受读写操作,不保证各节点的数据一致性
